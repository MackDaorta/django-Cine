{% extends 'core/base.html' %}
{% load static %}

{% block title %}Editar Producto - {{ producto.nombre }}{% endblock %}

{% block page_css %}
<link rel="stylesheet" href="{% static 'administrator/admin_productos.css' %}">
{% endblock %}

{% block content %}
<div class="centro">
  <h2 class="titulo"> Editar Producto: {{ producto.nombre }}</h2>

  <div class="form-container">

    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}

      <div class="form-group">
        <label for="nombre">Nombre del Producto:</label>
        <input type="text" id="nombre" name="nombre" value="{{ producto.nombre }}" required>
      </div>

      <div class="form-group">
        <label for="descripcion">Descripción:</label>
        <textarea id="descripcion" name="descripcion" required>{{ producto.descripcion }}</textarea>
      </div>

      <div class="form-group">
        <label for="precio">Precio (Ej: 15.50):</label>
        <input type="number" step="0.01" id="precio" name="precio" value="{{ producto.precio|stringformat:'.2f' }}" required>
         </div>

      <div class="form-group">
        <label>Imagen Actual:</label>
        {% if producto.imagen %}
          <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}" height="100" style="margin-bottom: 10px; display: block; border-radius: 5px;">
        {% else %}
          <p style="color: #aaa;">Sin imagen</p>
        {% endif %}
        <label for="imagen_nueva">Cambiar Imagen (opcional):</label>
        <input type="file" id="imagen_nueva" name="imagen" accept="image/*">
      </div>

      <div class="form-group">
        <label for="categoria">Categoría</label>
        <select id="categoria" name="categoria" required>
          <option value="">Seleccione la categoría</option>
          <option value="COMBO" {% if producto.categoria == 'COMBO' %}selected{% endif %}>Combo</option>
          <option value="POPCORN" {% if producto.categoria == 'POPCORN' %}selected{% endif %}>Popcorn</option>
          <option value="BEBIDA" {% if producto.categoria == 'BEBIDA' %}selected{% endif %}>Bebida</option>
          <option value="SNACK" {% if producto.categoria == 'SNACK' %}selected{% endif %}>Snack</option>
          <option value="COLECCIONABLES" {% if producto.categoria == 'COLECCIONABLES' %}selected{% endif %}>Coleccionables</option>
          <option value="OTRO" {% if producto.categoria == 'OTRO' %}selected{% endif %}>Otro</option>
        </select>
      </div>

      <button type="submit" class="btn-action">Guardar Cambios</button>
      <a href="{% url 'administrator:admin_productos' %}" style="margin-left: 10px; color: #aaa; text-decoration: none;">Cancelar</a>

      {% if error %}
        <p style="color: red; margin-top: 10px;">{{ error }}</p>
      {% endif %}

    </form>
  </div>
</div>
{% endblock %}