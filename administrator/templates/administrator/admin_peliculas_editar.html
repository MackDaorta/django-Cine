{% extends 'core/base.html' %} {% load static %} 
{% block title %}Editar Pelicula - {{ pelicula.nombre }}    {% endblock %} 
{% block page_css %}
<link
  rel="stylesheet"
  href="{% static 'administrator/admin_peliculas.css' %}"
/>
{% endblock %} {% block content %}
<div class="centro">
  <h2 class="titulo">Editar Pelicula: {{ pelicula.nombre }}</h2>
  <div class="form-container">
    <form id="productForm" method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="form-group">
        <label for="nombre">Nombre de la pelicula:</label>
        <input type="text" id="nombre" name="nombre" value="{{ pelicula.nombre }}" required />
      </div>
      <div class="form-group">
        <label for="sinopsis">Sinopsis:</label>
        <textarea id="sinopsis" name="sinopsis" required>{{ pelicula.sinopsis }}</textarea>
      </div>
      <div class="form-group">
        <label for="duracion">Duracion (minutos):</label>
        <input type="text" id="duracion" name="duracion" value="{{ pelicula.duracion }}" required />
      </div>
     <div class="form-group">
        <label>Imagen Actual:</label>
        {% if sala.imagen %}
          <img src="{{ pelicula.imagen.url }}" alt="{{ pelicula.nombre }}" height="100" style="margin-bottom: 10px; display: block; border-radius: 5px;">
        {% else %}
          <p style="color: #aaa;">Sin imagen</p>
        {% endif %}
        <label for="imagen_nueva">Cambiar Imagen (opcional):</label>
        <input type="file" id="imagen_nueva" name="imagen" accept="image/*">
      </div>

      <div class="form-group">
        <label for="fecha_estreno">Fecha de estreno:</label>
        <input type="date" id="fecha_estreno" name="fecha_estreno" value="{{ pelicula.fecha_estreno }}" required />
      </div>
      <div class="from-group">
        <label for="restriccion">Restriccion</label>
        <select id="restriccion" name="restriccion" value="{{ pelicula.restriccion }}" required>
          <option value="">Seleccione la restriccion</option>
          <option value="APT">APT</option>
          <option value="+14">+14</option>
          <option value="+18">+18</option>
        </select>
      </div>
     <div class="form-group">
  <label for="generos">Genero</label>
  <select id="generos" name="generos" multiple required> <option value="">Seleccione el genero</option>
    {% for genero in generos %}
    <option value="{{ genero.id }}" 
        {% if genero in pelicula.generos.all %}selected{% endif %}
    >
        {{ genero.nombre }}
    </option>
    {% endfor %}
  </select>
  <small> Mant√©n CTRL para seleccionar mas de un genero</small>
</div>

<div class="form-group">
  <label for="salas">Sala</label>
  <select id="salas" name="salas" multiple required> <option value="">Seleccione la sala</option>
    {% for sala in salas %}
    <option value="{{ sala.id }}"
        {% if sala in pelicula.salas.all %}selected{% endif %}
    >
      {{ sala.nombre }}
    </option>
    {% endfor %}
  </select>
</div>


      <button type="submit" class="btn-action">Editar Pelicula</button>
      {% if error %}
      <p style="color: red; margin-top: 10px">{{ error }}</p>
      {% endif %}
    </form>
  </div>
    </div>

{% endblock %}
